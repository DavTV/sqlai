"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate";
exports.ids = ["pages/api/generate"];
exports.modules = {

/***/ "body-parser":
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("body-parser");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("express");

/***/ }),

/***/ "mysql":
/*!************************!*\
  !*** external "mysql" ***!
  \************************/
/***/ ((module) => {

module.exports = require("mysql");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("openai");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "pg-promise":
/*!*****************************!*\
  !*** external "pg-promise" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("pg-promise");

/***/ }),

/***/ "(api)/./pages/api/generate.js":
/*!*******************************!*\
  !*** ./pages/api/generate.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst express = __webpack_require__(/*! express */ \"express\");\nconst mysql = __webpack_require__(/*! mysql */ \"mysql\");\nconst bodyParser = __webpack_require__(/*! body-parser */ \"body-parser\");\nconst server = express();\nserver.use(bodyParser.json());\nconst configuration = new openai__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(configuration);\n/* harmony default export */ async function __WEBPACK_DEFAULT_EXPORT__(req, res) {\n    if (!configuration.apiKey) {\n        res.status(500).json({\n            result: completion.data.choices[0].text,\n            query,\n            message: \"Conexi\\xf3n con api fallada por apiKey.\",\n            exito: false\n        });\n        return;\n    }\n    // console.log(configuration)\n    const host = req.body.host, user = req.body.user, password = req.body.password, database = req.body.database;\n    // console.log(req.body)\n    const query = req.body.query;\n    const inputFrecuent = req.body.inputFrecuent;\n    const typeDb = req.body.typeDb;\n    try {\n        const completion1 = await openai.createCompletion({\n            model: \"text-davinci-003\",\n            prompt: generatePrompt(query),\n            temperature: 0.6,\n            max_tokens: 200\n        });\n        switch(typeDb){\n            case 0:\n                const connection = mysql.createConnection({\n                    host: host,\n                    user: user,\n                    password: password,\n                    database: database\n                });\n                connection.connect(function(error) {\n                    try {\n                        if (error) {\n                            // console.log(sql)\n                            res.status(200).json({\n                                result: inputFrecuent || completion1.data.choices[0].text,\n                                query,\n                                message: \"Error de conexi\\xf3n.\",\n                                exito: false,\n                                details: [\n                                    {\n                                        message: \"Revisa los parametros de tu base de datos.\"\n                                    }\n                                ]\n                            });\n                        } else {\n                            // const sql =`SHOW FULL TABLES FROM ${database}`;\n                            const sql = completion1.data.choices[0].text;\n                            const sqlQuery = `Insert INTO querys (input,query) values (\"${inputFrecuent != \"\" ? inputFrecuent : query}\",\"${completion1.data.choices[0].text}\")`;\n                            connection.query(sql, (error, details)=>{\n                                // if(details.affectedRows){\n                                //     details =[{message:\"Query successfull.\"}]\n                                // }\n                                if (details) {\n                                    res.status(200).json({\n                                        result: completion1.data.choices[0].text,\n                                        query: inputFrecuent || query,\n                                        message: \"Conexi\\xf3n exitoso\",\n                                        exito: true,\n                                        details\n                                    });\n                                } else {\n                                    const QueryTraducido = async ()=>{\n                                        const queryTraducido = query + \" traduce solo la tabla a ingl\\xe9s y si se usa alguna columna traducela tambi\\xe9n,  muestrame solo la consulta final\";\n                                        const completionTraducido = await openai.createCompletion({\n                                            model: \"text-davinci-003\",\n                                            prompt: generatePrompt(queryTraducido),\n                                            temperature: 0.6,\n                                            max_tokens: 200\n                                        });\n                                        const sqlTraducido = completionTraducido.data.choices[0].text;\n                                        console.log(sqlTraducido, \"sql traducido\");\n                                        connection.query(sqlTraducido, (error, detailsTraducido)=>{\n                                            // console.log()\n                                            console.log(\"detalles traduciado\", detailsTraducido);\n                                            // res.status(200).json({ result: completionTraducido.data.choices[0].text, query: queryTraducido, message: \"ConexiÃ³n exitoso\", exito: true, detailsTraducido })\n                                            // details = detailsTraducido;\n                                            res.status(200).json({\n                                                result: completionTraducido.data.choices[0].text,\n                                                queryTraducido: inputFrecuent || query,\n                                                message: \"Conexi\\xf3n exitoso\",\n                                                exito: true,\n                                                details: detailsTraducido || [\n                                                    {\n                                                        message: \"No se encontro respuesta, intenta otra vez.\"\n                                                    }\n                                                ]\n                                            });\n                                        });\n                                    };\n                                    QueryTraducido();\n                                }\n                                console.log(\"details con la traducci\\xf3n activda\", details);\n                                details = details || [\n                                    {\n                                        message: \"No se encontro respuesta, intenta otra vez.\"\n                                    }\n                                ];\n                                details = details.affectedRows ? [\n                                    {\n                                        message: \"Query successfull.\"\n                                    }\n                                ] : details;\n                                console.log(details, \"details\");\n                                if (details.length > 1) {\n                                    connection.query(sqlQuery, (error, details)=>{\n                                        if (error) {\n                                            console.log(error);\n                                        } else {\n                                            console.log(\"entro\");\n                                            console.log(details, \"segunda consulta\");\n                                        }\n                                    });\n                                }\n                            // res.status(200).json({ result: completion.data.choices[0].text, query: inputFrecuent || query, message: \"ConexiÃ³n exitoso\", exito: true, details })\n                            });\n                        }\n                    } catch (x) {\n                        console.log(\"Contacto.agregarUsuario.connect --Error-- \" + x);\n                    }\n                });\n                break;\n            case 1:\n                try {\n                    const pgp = __webpack_require__(/*! pg-promise */ \"pg-promise\")({\n                        noWarnings: true\n                    });\n                    const db = pgp(`postgres://${user}:${password}@${host}:5432/${database}`);\n                    //  const  result = pool.query(\"select NOW()\",\"result\").json()\n                    console.log(db.connect);\n                    const postGres = async ()=>{\n                        try {\n                            const result = await db.many(completion1.data.choices[0].text);\n                            console.log(result);\n                            res.status(200).json({\n                                result: completion1.data.choices[0].text,\n                                query: inputFrecuent || query,\n                                message: \"Conection successfull\",\n                                exito: true,\n                                details: result\n                            });\n                            // const sql = completion.data.choices[0].text;\n                            // const sqlQuery = `Insert INTO querys (input,query) values (\"${inputFrecuent != \"\" ? inputFrecuent : query}\",\"${completion.data.choices[0].text}\")`\n                            console.log(query);\n                            if (result) {\n                                const result2 = await db.one(`Insert INTO querys (input,query) values ('${inputFrecuent != \"\" ? inputFrecuent : query}','${completion1.data.choices[0].text}')`);\n                            }\n                        //  console.log(result2)\n                        } catch (error) {\n                            console.log(error);\n                            let message = error.message;\n                            if (message) {\n                                res.status(200).json({\n                                    result: completion1.data.choices[0].text,\n                                    query: inputFrecuent || query,\n                                    message,\n                                    details: [\n                                        {\n                                            message\n                                        }\n                                    ]\n                                });\n                            } else {\n                                res.status(200).json({\n                                    result: completion1.data.choices[0].text,\n                                    query: inputFrecuent || query,\n                                    message: \"Revisa los parametros de tu base de datos.\",\n                                    details: [\n                                        {\n                                            message: \"No se encontro data, intenta otra vez.\"\n                                        }\n                                    ]\n                                });\n                            }\n                        }\n                    //  console.log(result)\n                    };\n                    postGres();\n                // db.client.on('connect', (error) => {\n                //   console.log('ConexiÃ³n establecida');\n                //   if(error){\n                //     res.status(200).json({ result: inputFrecuent || completion.data.choices[0].text, query, message: \"Conection Error.\", exito: false, details: [{ message: \"Review your database parameters.\" }] })\n                //   }else{\n                //   const postGres= async()=>{\n                //      const result = await db.one(completion.data.choices[0].text);\n                //      details = result || [{ message: \"No data found, try another query.\" }]\n                //      details = result.rows ? [{ message: \"Query successfull.\" }] : details\n                //      res.status(200).json({ result: completion.data.choices[0].text, query: inputFrecuent || query, message: \"Conection Successfull\", exito: true, details })\n                //     //  console.log(result)\n                //    }\n                //    postGres()\n                //   }\n                // });\n                //  console.log(data);\n                //  let result = await pool.query(\"select NOW()\");\n                } catch (error) {\n                    console.log(error, \"postgrees\");\n                }\n                break;\n            default:\n                console.log(\"ning\\xfan gestor fue selecionado\");\n                break;\n        }\n    } catch (err) {\n        res.status(200).json({\n            result: completion.data.choices[0].text,\n            query: inputFrecuent || query,\n            message: \"Revisa los parametros de su base de datos.\",\n            details: [\n                {\n                    message: \"Error con la key.\"\n                }\n            ]\n        });\n        res.status(200).json({\n            message: \"Error en la conexi\\xf3n a la base de datos o apiKey.\"\n        });\n    }\n}\n// console.log (completion.data.choices[0].text);\nfunction generatePrompt(query) {\n    const capitalizedquery = query[0].toUpperCase() + query.slice(1).toLowerCase();\n    return `Suggest three names for an query that is a superhero.\r\n\r\nQuery: agregar\r\nResponse: INSERT INTO Alumnos (IdAlumno, Nombres, Apellidos, Edad, Direccion_Residencia) VALUES \r\n('0101', 'Franklin1', 'Garcia', 25, 'avenida 01');  \r\n\r\nQuery: eliminar\r\nResponse: DELETE FROM cursos WHERE id =1; \r\n  \r\nQuery: mostrar\r\nResponse: SELECT * FROM cursos\r\n\r\nQuery: actualiza\r\nResponse: UPDATE cursos SET name ='david', slug ='dato', description ='esta es una descripciÃ³n', categoria='libros' WHERE id =2\r\n\r\nQuery: verifica\r\nResponse: verifica si existe la tabla, estas tabla pueden ser nombradas en ingles o espaÃ±ol, ademÃ¡s considera de forma indistinta si es plural o singular;\r\n\r\nQuery: ${capitalizedquery}\r\nResponse:`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtnQkFDTixNQUFNO2dCQUVSLHNCQUFzQjtnQkFFdEIsa0RBQWtEO2dCQUVuRCxFQUFFLE9BQU9qQixPQUFPO29CQUNkUSxRQUFRQyxHQUFHLENBQUNULE9BQU87Z0JBRXJCO2dCQUtELEtBQU07WUFDUjtnQkFDRVEsUUFBUUMsR0FBRyxDQUFDO2dCQUNaLEtBQU07UUFDVjtJQUNGLEVBQUUsT0FBT1ksS0FBSztRQUNaL0MsSUFBSUMsTUFBTSxDQUFDLEtBQUtULElBQUksQ0FBQztZQUFFVSxRQUFRQyxXQUFXQyxJQUFJLENBQUNDLE9BQU8sQ0FBQyxFQUFFLENBQUNDLElBQUk7WUFBRUMsT0FBT1EsaUJBQWlCUjtZQUFPQyxTQUFRO1lBQThDbUIsU0FBUztnQkFBQztvQkFBRW5CLFNBQVM7Z0JBQW9CO2FBQUU7UUFBQTtRQUNoTVIsSUFBSUMsTUFBTSxDQUFDLEtBQUtULElBQUksQ0FBQztZQUFFZ0IsU0FBUztRQUFvRDtJQUV0RjtBQUNGLENBQUM7QUFDRyxpREFBaUQ7QUFHckQsU0FBU1ksZUFBZWIsS0FBSyxFQUFFO0lBQzdCLE1BQU15QyxtQkFDSnpDLEtBQUssQ0FBQyxFQUFFLENBQUMwQyxXQUFXLEtBQUsxQyxNQUFNMkMsS0FBSyxDQUFDLEdBQUdDLFdBQVc7SUFDckQsT0FBTyxDQUFDO0FBb0JWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpLXF1aWNrc3RhcnQtbm9kZS8uL3BhZ2VzL2FwaS9nZW5lcmF0ZS5qcz82MjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbmZpZ3VyYXRpb24sIE9wZW5BSUFwaSB9IGZyb20gXCJvcGVuYWlcIjtcclxuaW1wb3J0IHtQb29sfSBmcm9tIFwicGdcIjtcclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgbXlzcWwgPSByZXF1aXJlKCdteXNxbCcpO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxuY29uc3Qgc2VydmVyID0gZXhwcmVzcygpO1xyXG5zZXJ2ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuXHJcblxyXG5cclxuY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxyXG59KTtcclxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSUFwaShjb25maWd1cmF0aW9uKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xyXG4gIGlmICghY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICBcclxuICAgICAgcmVzdWx0OiBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0LCBxdWVyeSwgbWVzc2FnZTogXCJDb25leGnDs24gY29uIGFwaSBmYWxsYWRhIHBvciBhcGlLZXkuXCIsIGV4aXRvOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIGNvbnNvbGUubG9nKGNvbmZpZ3VyYXRpb24pXHJcbiAgY29uc3QgaG9zdCA9IHJlcS5ib2R5Lmhvc3QsXHJcbiAgICB1c2VyID0gcmVxLmJvZHkudXNlcixcclxuICAgIHBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICBkYXRhYmFzZSA9IHJlcS5ib2R5LmRhdGFiYXNlO1xyXG5cclxuIFxyXG4gIC8vIGNvbnNvbGUubG9nKHJlcS5ib2R5KVxyXG4gIGNvbnN0IHF1ZXJ5ID0gcmVxLmJvZHkucXVlcnk7XHJcbiAgY29uc3QgaW5wdXRGcmVjdWVudCA9IHJlcS5ib2R5LmlucHV0RnJlY3VlbnQ7XHJcbiAgY29uc3QgdHlwZURiID0gcmVxLmJvZHkudHlwZURiO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUNvbXBsZXRpb24oe1xyXG4gICAgICBtb2RlbDogXCJ0ZXh0LWRhdmluY2ktMDAzXCIsXHJcbiAgICAgIHByb21wdDogZ2VuZXJhdGVQcm9tcHQocXVlcnkpLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogMC42LFxyXG4gICAgICBtYXhfdG9rZW5zOiAyMDAsXHJcbiAgICB9KTtcclxuICAgIHN3aXRjaCAodHlwZURiKSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XHJcbiAgICAgICAgICBob3N0OiBob3N0LFxyXG4gICAgICAgICAgdXNlcjogdXNlcixcclxuICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcclxuICAgICAgICAgIGRhdGFiYXNlOiBkYXRhYmFzZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3FsKVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHQ6IGlucHV0RnJlY3VlbnQgfHwgY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCwgcXVlcnksIG1lc3NhZ2U6IFwiRXJyb3IgZGUgY29uZXhpw7NuLlwiLCBleGl0bzogZmFsc2UsIGRldGFpbHM6IFt7IG1lc3NhZ2U6IFwiUmV2aXNhIGxvcyBwYXJhbWV0cm9zIGRlIHR1IGJhc2UgZGUgZGF0b3MuXCIgfV0gfSlcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gY29uc3Qgc3FsID1gU0hPVyBGVUxMIFRBQkxFUyBGUk9NICR7ZGF0YWJhc2V9YDtcclxuICAgICAgICAgICAgICBjb25zdCBzcWwgPSBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0O1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNxbFF1ZXJ5ID0gYEluc2VydCBJTlRPIHF1ZXJ5cyAoaW5wdXQscXVlcnkpIHZhbHVlcyAoXCIke2lucHV0RnJlY3VlbnQgIT0gXCJcIiA/IGlucHV0RnJlY3VlbnQgOiBxdWVyeX1cIixcIiR7Y29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dH1cIilgXHJcbiAgICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIChlcnJvciwgZGV0YWlscykgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYoZGV0YWlscy5hZmZlY3RlZFJvd3Mpe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGRldGFpbHMgPVt7bWVzc2FnZTpcIlF1ZXJ5IHN1Y2Nlc3NmdWxsLlwifV1cclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIGlmKGRldGFpbHMpe1xyXG4gICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCwgcXVlcnk6IGlucHV0RnJlY3VlbnQgfHwgcXVlcnksIG1lc3NhZ2U6IFwiQ29uZXhpw7NuIGV4aXRvc29cIiwgZXhpdG86IHRydWUsIGRldGFpbHMgfSlcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBRdWVyeVRyYWR1Y2lkbz0gYXN5bmMoKT0+e1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeVRyYWR1Y2lkbyA9IHF1ZXJ5K1wiIHRyYWR1Y2Ugc29sbyBsYSB0YWJsYSBhIGluZ2zDqXMgeSBzaSBzZSB1c2EgYWxndW5hIGNvbHVtbmEgdHJhZHVjZWxhIHRhbWJpw6luLCAgbXVlc3RyYW1lIHNvbG8gbGEgY29uc3VsdGEgZmluYWxcIjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uVHJhZHVjaWRvID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUNvbXBsZXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IFwidGV4dC1kYXZpbmNpLTAwM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBnZW5lcmF0ZVByb21wdChxdWVyeVRyYWR1Y2lkbyksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC42LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogMjAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3FsVHJhZHVjaWRvID0gY29tcGxldGlvblRyYWR1Y2lkby5kYXRhLmNob2ljZXNbMF0udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzcWxUcmFkdWNpZG8sIFwic3FsIHRyYWR1Y2lkb1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVHJhZHVjaWRvLCAoZXJyb3IsIGRldGFpbHNUcmFkdWNpZG8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCJkZXRhbGxlcyB0cmFkdWNpYWRvXCIsZGV0YWlsc1RyYWR1Y2lkbylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHQ6IGNvbXBsZXRpb25UcmFkdWNpZG8uZGF0YS5jaG9pY2VzWzBdLnRleHQsIHF1ZXJ5OiBxdWVyeVRyYWR1Y2lkbywgbWVzc2FnZTogXCJDb25leGnDs24gZXhpdG9zb1wiLCBleGl0bzogdHJ1ZSwgZGV0YWlsc1RyYWR1Y2lkbyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzID0gZGV0YWlsc1RyYWR1Y2lkbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHQ6IGNvbXBsZXRpb25UcmFkdWNpZG8uZGF0YS5jaG9pY2VzWzBdLnRleHQsIHF1ZXJ5VHJhZHVjaWRvOiBpbnB1dEZyZWN1ZW50IHx8IHF1ZXJ5LCBtZXNzYWdlOiBcIkNvbmV4acOzbiBleGl0b3NvXCIsIGV4aXRvOiB0cnVlLCBkZXRhaWxzOiBkZXRhaWxzVHJhZHVjaWRvIHx8W3sgbWVzc2FnZTogXCJObyBzZSBlbmNvbnRybyByZXNwdWVzdGEsIGludGVudGEgb3RyYSB2ZXouXCIgfV0gfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIFF1ZXJ5VHJhZHVjaWRvKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGV0YWlscyBjb24gbGEgdHJhZHVjY2nDs24gYWN0aXZkYVwiLCBkZXRhaWxzKVxyXG4gICAgICAgICAgICAgICAgZGV0YWlscyA9IGRldGFpbHMgfHwgW3sgbWVzc2FnZTogXCJObyBzZSBlbmNvbnRybyByZXNwdWVzdGEsIGludGVudGEgb3RyYSB2ZXouXCIgfV1cclxuICAgICAgICAgICAgICAgIGRldGFpbHMgPSBkZXRhaWxzLmFmZmVjdGVkUm93cyA/IFt7IG1lc3NhZ2U6IFwiUXVlcnkgc3VjY2Vzc2Z1bGwuXCIgfV0gOiBkZXRhaWxzXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGV0YWlscywgXCJkZXRhaWxzXCIpXHJcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsUXVlcnksIChlcnJvciwgZGV0YWlscykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZW50cm9cIilcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRldGFpbHMsIFwic2VndW5kYSBjb25zdWx0YVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVzdWx0OiBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0LCBxdWVyeTogaW5wdXRGcmVjdWVudCB8fCBxdWVyeSwgbWVzc2FnZTogXCJDb25leGnDs24gZXhpdG9zb1wiLCBleGl0bzogdHJ1ZSwgZGV0YWlscyB9KVxyXG5cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSBjYXRjaCAoeCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRhY3RvLmFncmVnYXJVc3VhcmlvLmNvbm5lY3QgLS1FcnJvci0tIFwiICsgeCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgY29uc3QgcGdwID0gcmVxdWlyZSgncGctcHJvbWlzZScpKHtcclxuICAgICAgICAgICAgbm9XYXJuaW5nczogdHJ1ZVxyXG4gICAgICAgICAgICB9KSAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcGdwKGBwb3N0Z3JlczovLyR7dXNlcn06JHtwYXNzd29yZH1AJHtob3N0fTo1NDMyLyR7ZGF0YWJhc2V9YClcclxuICAgICAgICAgICAgLy8gIGNvbnN0ICByZXN1bHQgPSBwb29sLnF1ZXJ5KFwic2VsZWN0IE5PVygpXCIsXCJyZXN1bHRcIikuanNvbigpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRiLmNvbm5lY3QpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0R3Jlcz0gYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLm1hbnkoY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHQ6IGNvbXBsZXRpb24uZGF0YS5jaG9pY2VzWzBdLnRleHQsIHF1ZXJ5OiBpbnB1dEZyZWN1ZW50IHx8IHF1ZXJ5LCBtZXNzYWdlOiBcIkNvbmVjdGlvbiBzdWNjZXNzZnVsbFwiLCBleGl0bzogdHJ1ZSwgZGV0YWlsczogcmVzdWx0fSkgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHNxbCA9IGNvbXBsZXRpb24uZGF0YS5jaG9pY2VzWzBdLnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgc3FsUXVlcnkgPSBgSW5zZXJ0IElOVE8gcXVlcnlzIChpbnB1dCxxdWVyeSkgdmFsdWVzIChcIiR7aW5wdXRGcmVjdWVudCAhPSBcIlwiID8gaW5wdXRGcmVjdWVudCA6IHF1ZXJ5fVwiLFwiJHtjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0fVwiKWBcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhxdWVyeSlcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBkYi5vbmUoIGBJbnNlcnQgSU5UTyBxdWVyeXMgKGlucHV0LHF1ZXJ5KSB2YWx1ZXMgKCcke2lucHV0RnJlY3VlbnQgIT0gXCJcIiA/IGlucHV0RnJlY3VlbnQgOiBxdWVyeX0nLCcke2NvbXBsZXRpb24uZGF0YS5jaG9pY2VzWzBdLnRleHR9JylgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKHJlc3VsdDIpXHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobWVzc2FnZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCwgcXVlcnk6IGlucHV0RnJlY3VlbnQgfHwgcXVlcnksIG1lc3NhZ2UsIGRldGFpbHMgOlt7IG1lc3NhZ2V9XX0pICBcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVzdWx0OiBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0LCBxdWVyeTogaW5wdXRGcmVjdWVudCB8fCBxdWVyeSwgbWVzc2FnZTpcIlJldmlzYSBsb3MgcGFyYW1ldHJvcyBkZSB0dSBiYXNlIGRlIGRhdG9zLlwiLCBkZXRhaWxzIDpbeyBtZXNzYWdlOiBcIk5vIHNlIGVuY29udHJvIGRhdGEsIGludGVudGEgb3RyYSB2ZXouXCIgfV19KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3N0R3JlcygpXHJcbiAgICAgICAgICAgIC8vIGRiLmNsaWVudC5vbignY29ubmVjdCcsIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdDb25leGnDs24gZXN0YWJsZWNpZGEnKTtcclxuICAgICAgICAgICAgLy8gICBpZihlcnJvcil7XHJcbiAgICAgICAgICAgIC8vICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogaW5wdXRGcmVjdWVudCB8fCBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0LCBxdWVyeSwgbWVzc2FnZTogXCJDb25lY3Rpb24gRXJyb3IuXCIsIGV4aXRvOiBmYWxzZSwgZGV0YWlsczogW3sgbWVzc2FnZTogXCJSZXZpZXcgeW91ciBkYXRhYmFzZSBwYXJhbWV0ZXJzLlwiIH1dIH0pXHJcbiAgICAgICAgICAgIC8vICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vICAgY29uc3QgcG9zdEdyZXM9IGFzeW5jKCk9PntcclxuICAgICAgICAgICAgLy8gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5vbmUoY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgZGV0YWlscyA9IHJlc3VsdCB8fCBbeyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmQsIHRyeSBhbm90aGVyIHF1ZXJ5LlwiIH1dXHJcbiAgICAgICAgICAgIC8vICAgICAgZGV0YWlscyA9IHJlc3VsdC5yb3dzID8gW3sgbWVzc2FnZTogXCJRdWVyeSBzdWNjZXNzZnVsbC5cIiB9XSA6IGRldGFpbHNcclxuIFxyXG5cclxuICAgICAgICAgICAgLy8gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCwgcXVlcnk6IGlucHV0RnJlY3VlbnQgfHwgcXVlcnksIG1lc3NhZ2U6IFwiQ29uZWN0aW9uIFN1Y2Nlc3NmdWxsXCIsIGV4aXRvOiB0cnVlLCBkZXRhaWxzIH0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgIC8vICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgIC8vICAgIH1cclxuICAgICAgICAgICAgLy8gICAgcG9zdEdyZXMoKVxyXG4gICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAvLyAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgICAgICAgLy8gIGxldCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFwic2VsZWN0IE5PVygpXCIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IsIFwicG9zdGdyZWVzXCIpXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgIH0gXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiUG9zdGdyZXNcIik7XHJcbiAgICAgICAgLy8gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHQ6IGlucHV0RnJlY3VlbnQgfHwgY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCwgcXVlcnksIG1lc3NhZ2U6IFwiQ29uZWN0aW9uIEVycm9yLlwiLCBleGl0bzogZmFsc2UsIGRldGFpbHM6IFt7IG1lc3NhZ2U6IFwiRGVwbG95bWVudCB3aXRoIHBvc3RncmVzIGlzIGluIHByb2dyZXNzLlwiIH1dIH0pXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJuaW5nw7puIGdlc3RvciBmdWUgc2VsZWNpb25hZG9cIilcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVzdWx0OiBjb21wbGV0aW9uLmRhdGEuY2hvaWNlc1swXS50ZXh0LCBxdWVyeTogaW5wdXRGcmVjdWVudCB8fCBxdWVyeSwgbWVzc2FnZTpcIlJldmlzYSBsb3MgcGFyYW1ldHJvcyBkZSBzdSBiYXNlIGRlIGRhdG9zLlwiLCBkZXRhaWxzIDpbeyBtZXNzYWdlOiBcIkVycm9yIGNvbiBsYSBrZXkuXCIgfV19KVxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkVycm9yIGVuIGxhIGNvbmV4acOzbiBhIGxhIGJhc2UgZGUgZGF0b3MgbyBhcGlLZXkuXCIgfSlcclxuXHJcbiAgfVxyXG59XHJcbiAgICAvLyBjb25zb2xlLmxvZyAoY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCk7XHJcblxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVQcm9tcHQocXVlcnkpIHtcclxuICBjb25zdCBjYXBpdGFsaXplZHF1ZXJ5ID1cclxuICAgIHF1ZXJ5WzBdLnRvVXBwZXJDYXNlKCkgKyBxdWVyeS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiBgU3VnZ2VzdCB0aHJlZSBuYW1lcyBmb3IgYW4gcXVlcnkgdGhhdCBpcyBhIHN1cGVyaGVyby5cclxuXHJcblF1ZXJ5OiBhZ3JlZ2FyXHJcblJlc3BvbnNlOiBJTlNFUlQgSU5UTyBBbHVtbm9zIChJZEFsdW1ubywgTm9tYnJlcywgQXBlbGxpZG9zLCBFZGFkLCBEaXJlY2Npb25fUmVzaWRlbmNpYSkgVkFMVUVTIFxyXG4oJzAxMDEnLCAnRnJhbmtsaW4xJywgJ0dhcmNpYScsIDI1LCAnYXZlbmlkYSAwMScpOyAgXHJcblxyXG5RdWVyeTogZWxpbWluYXJcclxuUmVzcG9uc2U6IERFTEVURSBGUk9NIGN1cnNvcyBXSEVSRSBpZCA9MTsgXHJcbiAgXHJcblF1ZXJ5OiBtb3N0cmFyXHJcblJlc3BvbnNlOiBTRUxFQ1QgKiBGUk9NIGN1cnNvc1xyXG5cclxuUXVlcnk6IGFjdHVhbGl6YVxyXG5SZXNwb25zZTogVVBEQVRFIGN1cnNvcyBTRVQgbmFtZSA9J2RhdmlkJywgc2x1ZyA9J2RhdG8nLCBkZXNjcmlwdGlvbiA9J2VzdGEgZXMgdW5hIGRlc2NyaXBjacOzbicsIGNhdGVnb3JpYT0nbGlicm9zJyBXSEVSRSBpZCA9MlxyXG5cclxuUXVlcnk6IHZlcmlmaWNhXHJcblJlc3BvbnNlOiB2ZXJpZmljYSBzaSBleGlzdGUgbGEgdGFibGEsIGVzdGFzIHRhYmxhIHB1ZWRlbiBzZXIgbm9tYnJhZGFzIGVuIGluZ2xlcyBvIGVzcGHDsW9sLCBhZGVtw6FzIGNvbnNpZGVyYSBkZSBmb3JtYSBpbmRpc3RpbnRhIHNpIGVzIHBsdXJhbCBvIHNpbmd1bGFyO1xyXG5cclxuUXVlcnk6ICR7Y2FwaXRhbGl6ZWRxdWVyeX1cclxuUmVzcG9uc2U6YDtcclxufVxyXG4iXSwibmFtZXMiOlsiQ29uZmlndXJhdGlvbiIsIk9wZW5BSUFwaSIsIlBvb2wiLCJleHByZXNzIiwicmVxdWlyZSIsIm15c3FsIiwiYm9keVBhcnNlciIsInNlcnZlciIsInVzZSIsImpzb24iLCJjb25maWd1cmF0aW9uIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwib3BlbmFpIiwicmVxIiwicmVzIiwic3RhdHVzIiwicmVzdWx0IiwiY29tcGxldGlvbiIsImRhdGEiLCJjaG9pY2VzIiwidGV4dCIsInF1ZXJ5IiwibWVzc2FnZSIsImV4aXRvIiwiaG9zdCIsImJvZHkiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImlucHV0RnJlY3VlbnQiLCJ0eXBlRGIiLCJjcmVhdGVDb21wbGV0aW9uIiwibW9kZWwiLCJwcm9tcHQiLCJnZW5lcmF0ZVByb21wdCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsImNvbm5lY3Rpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwiY29ubmVjdCIsImVycm9yIiwiZGV0YWlscyIsInNxbCIsInNxbFF1ZXJ5IiwiUXVlcnlUcmFkdWNpZG8iLCJxdWVyeVRyYWR1Y2lkbyIsImNvbXBsZXRpb25UcmFkdWNpZG8iLCJzcWxUcmFkdWNpZG8iLCJjb25zb2xlIiwibG9nIiwiZGV0YWlsc1RyYWR1Y2lkbyIsImFmZmVjdGVkUm93cyIsImxlbmd0aCIsIngiLCJwZ3AiLCJub1dhcm5pbmdzIiwiZGIiLCJwb3N0R3JlcyIsIm1hbnkiLCJyZXN1bHQyIiwib25lIiwiZXJyIiwiY2FwaXRhbGl6ZWRxdWVyeSIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/generate.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/generate.js"));
module.exports = __webpack_exports__;

})();